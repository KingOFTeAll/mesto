(()=>{"use strict";var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",disabledSubmitButton:"form__submit_disabled",inputErrorSelector:"form__input_type-error",errorClass:"form__error_visible"},e=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button");function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n){var r=e.cardData,o=e.handleCardClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cardData=r,this._card=this._getCardTemplate(n),this._cardLikeButton=this._card.querySelector(".elements__like"),this._cardDeleteButton=this._card.querySelector(".elements__trash"),this._cardImage=this._card.querySelector(".elements__image"),this._cardTitle=this._card.querySelector(".elements__caption"),this._cardElement=this._createCard(),this._handleCardClick=o,this._setEventListeners()}var e,n;return e=t,(n=[{key:"_getCardTemplate",value:function(t){return document.querySelector(t).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_createCard",value:function(){return this._cardImage.src=this._cardData.link,this._cardImage.alt=this._cardData.name,this._cardTitle.textContent=this._cardData.name,this._card}},{key:"_deleteCard",value:function(){this._card.remove()}},{key:"_toggleCardLike",value:function(){this._cardLikeButton.classList.toggle("elements__like_active")}},{key:"_setEventListeners",value:function(){var t=this;this._cardLikeButton.addEventListener("click",(function(){return t._toggleCardLike()})),this._cardDeleteButton.addEventListener("click",(function(){return t._deleteCard()})),this._cardImage.addEventListener("click",(function(){t._handleCardClick({name:t._cardData.name,link:t._cardData.link})}))}},{key:"getCard",value:function(){return this._cardElement}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSetting=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._formSetting.inputSelector)),this._buttonElement=this._form.querySelector(this._formSetting.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._formSetting.disabledSubmitButton),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._formSetting.disabledSubmitButton),this._buttonElement.disabled=!1)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._formSetting.inputErrorSelector),e.classList.remove(this._formSetting.errorClass),e.textContent=""}},{key:"_showInputError",value:function(t,e){var n=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(this._formSetting.inputErrorSelector),n.textContent=e,n.classList.add(this._formSetting.errorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_setEventListeners",value:function(){var t=this;this._form.addEventListener("submit",(function(t){t.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"disableSubmitButton",value:function(){this._toggleButtonState()}},{key:"checkInputValidity",value:function(){var t=this;this._inputList.forEach((function(e){t._checkInputValidity(e)}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}var m=function(){function t(e){var n=e.nameSelector,r=e.dataSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._dataElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{userName:this._nameElement.textContent,userStatus:this._dataElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.userName,n=t.userStatus;this._nameElement.textContent=e,this._dataElement.textContent=n}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-img"))&&t.closePopup()}))}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(r);if(o){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupCaption=e._popup.querySelector(".ImgMax-container__caption"),e._popupImage=e._popup.querySelector(".ImgMax-container__Img"),e}return e=u,(n=[{key:"showPopupImgCard",value:function(t){console.log(t),this._popupImage.src=t.link,this._popupImage.alt="".concat(t.name,"."),this._popupCaption.textContent=t.name,g(w(u.prototype),"openPopup",this).call(this)}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var L=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,e);var n,r,o,i,u=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(o);if(i){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(e){var n,r=e.popupSelector,o=e.submitFunction;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=u.call(this,r))._submitFunction=o,n._inputList=n._popup.querySelectorAll(t.inputSelector),n._popupForm=n._popup.querySelector(t.formSelector),n}return n=a,(r=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name],console.log(e.name,t)}))}},{key:"closePopup",value:function(){P(C(a.prototype),"closePopup",this).call(this),this._popupForm.reset()}},{key:"setEventListeners",value:function(){var t=this;this._popupForm.addEventListener("submit",(function(){t._submitFunction(t._getInputValues())})),P(C(a.prototype),"setEventListeners",this).call(this)}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),a}(h),I=new m({nameSelector:".profile__name",dataSelector:".profile__status"});function T(t){return console.log(t),new i({cardData:t,handleCardClick:function(){R.showPopupImgCard(t)}},".template").getCard()}var q=new f({renderer:function(t){q.addItem(T(t))}},".elements__cards"),B=new L({popupSelector:".popup_profile",submitFunction:function(t){I.setUserInfo(t),B.closePopup()}}),R=new k(".popup_type_ImageMax"),x=new L({popupSelector:".popup_place",submitFunction:function(t){q.addItem(T({name:t.new_place,link:t.place_link})),x.closePopup()}});q.renderItems([{name:"created by Midjourney",link:"https://media.discordapp.net/attachments/1070346803221889055/1070346804765409340/SPOILER_Cacoethes_a_cat_floating_from_balloons_in_a_store_with_weird_mo_21aae443-e0c2-4e13-bcc7-ef7f88e1aa5f.png?width=506&height=506"},{name:"created by Midjourney",link:"https://media.discordapp.net/attachments/1038329663187062804/1073149113266352198/Bluewing_Old_chinese_paint_b5ea34ef-e758-4364-bcc7-850bef47d4ff.png?width=289&height=506"},{name:"created by Midjourney",link:"https://media.discordapp.net/attachments/1038329663187062804/1072101657120346122/MrNoMbre_landscape_of_Alaska_55f0591e-ab5f-475f-8492-a61782128e83.png?width=759&height=506"},{name:"created by Midjourney",link:"https://cdn.discordapp.com/attachments/1038329663187062804/1069076684428554240/treehouse_5.jpeg"},{name:"created by Midjourney",link:"https://sun1-99.userapi.com/impg/n2RgVCbazkukTQbdjA4j_CH473OkE46bVopGlw/v-6kzK128H0.jpg?size=960x1664&quality=96&sign=737cf3768990fe65ace6af947d91a28b&type=album"},{name:"created by Midjourney",link:"https://sun1-85.userapi.com/impg/2a-oDADp1is5zHhd8W5KQHWS1y6RekYyeTweUA/se7LOizvi0k.jpg?size=1024x1024&quality=96&sign=b1d4d6b31645c9dd8819bbf9ab3079dc&type=album"}]),R.setEventListeners(),B.setEventListeners(),x.setEventListeners();var D,V={};D=t,Array.from(document.querySelectorAll(D.formSelector)).forEach((function(t){var e=new c(D,t),n=t.getAttribute("name");V[n]=e,e.enableValidation()})),e.addEventListener("click",(function(){V.profileForm.disableSubmitButton();var t=I.getUserInfo();B.setInputValues({userName:t.userName,userStatus:t.userStatus}),B.openPopup()})),n.addEventListener("click",(function(){V.placeForm.disableSubmitButton(),x.openPopup()}))})();